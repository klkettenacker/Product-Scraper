<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="css/bulma.css">
    <link rel="stylesheet" href="css/style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SoftEng Product-Scaper</title>
</head>
<body>

    <header>
        <nav class="navbar">
            <h1 class="navbar-item title is-1">Product Scraper</h1>
            <h2 class="navbar-item subtitle is-3">A Lazada web scraper</h2>
        </nav>
    </header>

    <section>
        <div>
            <ul id="scraped-data">
            </ul>
        </div>
    </section>
    
    <script>
        fetch("datasample.json")
            .then(response => response.json())
            .then(data => {
                console.log(data)

                //For Loop iterating through DATA
                for(i=0; i<data.length;i++){

                    //Creates new list item element
                    var new_li = document.createElement("li");

                    //Creating <a> element and takes 'url' from data as href
                    var anchor = document.createElement("a"); anchor.href = data[i]['url']; anchor.target = "_blank";

                    //Creates a card <div> used for each individual product card also gives it class of "product-card"
                    var card = document.createElement("div"); card.className = "product-card";
                    
                    anchor.appendChild(card);
                    new_li.appendChild(anchor);
                    
                    //Extracting 'name', 'img_src', and 'price' from data
                    var img = data[i]['img_src'];
                    var name = document.createTextNode(data[i]['name']); 
                    var price = document.createTextNode(data[i]['price']); 

                    console.log(img)

                    //Create individual <div> for Name and Price
                    var img_elem = document.createElement("img"); img_elem.src = img;
                    var divname = document.createElement("div"); divname.className = "product-name";
                    var divprice = document.createElement("div"); divprice.className = "product-price";
                    divname.appendChild(name); divprice.appendChild(price);
                    card.appendChild(img_elem); card.appendChild(divname); card.appendChild(divprice);
                   
                    
                    //Append all of the above into the list item element
                    document.querySelector("#scraped-data").appendChild(new_li);

                    //Hierarchy diagram: LI->ANCHOR->DivCard->DivName & DivPrice
                }
                
            })
    </script>

</body>
</html>